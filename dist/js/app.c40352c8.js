(function(t){function e(e){for(var a,r,s=e[0],u=e[1],c=e[2],f=0,l=[];f<s.length;f++)r=s[f],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&l.push(o[r][0]),o[r]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);d&&d(e);while(l.length)l.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,r=1;r<n.length;r++){var s=n[r];0!==o[s]&&(a=!1)}a&&(i.splice(e--,1),t=u(u.s=n[0]))}return t}var a={},r={app:0},o={app:0},i=[];function s(t){return u.p+"js/"+({about:"about"}[t]||t)+"."+{about:"c07681e7"}[t]+".js"}function u(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(t){var e=[],n={about:1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise((function(e,n){for(var a="css/"+({about:"about"}[t]||t)+"."+{about:"9ff0da38"}[t]+".css",o=u.p+a,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var c=i[s],f=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(f===a||f===o))return e()}var l=document.getElementsByTagName("style");for(s=0;s<l.length;s++){c=l[s],f=c.getAttribute("data-href");if(f===a||f===o)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var a=e&&e.target&&e.target.src||o,i=new Error("Loading CSS chunk "+t+" failed.\n("+a+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=a,delete r[t],d.parentNode.removeChild(d),n(i)},d.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(d)})).then((function(){r[t]=0})));var a=o[t];if(0!==a)if(a)e.push(a[2]);else{var i=new Promise((function(e,n){a=o[t]=[e,n]}));e.push(a[2]=i);var c,f=document.createElement("script");f.charset="utf-8",f.timeout=120,u.nc&&f.setAttribute("nonce",u.nc),f.src=s(t);var l=new Error;c=function(e){f.onerror=f.onload=null,clearTimeout(d);var n=o[t];if(0!==n){if(n){var a=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+r+")",l.name="ChunkLoadError",l.type=a,l.request=r,n[1](l)}o[t]=void 0}};var d=setTimeout((function(){c({type:"timeout",target:f})}),12e4);f.onerror=f.onload=c,document.head.appendChild(f)}return Promise.all(e)},u.m=t,u.c=a,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)u.d(n,a,function(e){return t[e]}.bind(null,a));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/oculus-quest-store-list/",u.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],f=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var d=f;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0ab0":function(t,e,n){"use strict";n("c432")},"203f":function(t,e,n){"use strict";n("85d7")},"56d7":function(t,e,n){"use strict";n.r(e);n("4142");var a=n("39d1"),r=(n("4b0a"),n("2bb1")),o=(n("7844"),n("5596")),i=(n("91d5"),n("f0ca")),s=(n("c3a6"),n("ad06")),u=(n("5852"),n("d961")),c=(n("66cf"),n("343b")),f=(n("5f1a"),n("a3e2")),l=(n("9cb7"),n("66fd")),d=(n("66b9"),n("b650")),p=(n("2994"),n("2bdd")),h=(n("4056"),n("44bf")),m=(n("81e6"),n("9ffb")),v=(n("4d48"),n("d1e1")),b=(n("a909"),n("3acc")),g=(n("3c32"),n("417e")),y=(n("0653"),n("34e9")),D=(n("c194"),n("7744")),_=(n("bda7"),n("5e46")),w=(n("da3c"),n("0b33")),x=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},C=[],O=n("2877"),j={},T=Object(O["a"])(j,k,C,!1,null,null,null),I=T.exports,S=(n("d3b7"),n("8c4f")),E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[n("ScrollTop"),n("van-search",{attrs:{placeholder:"请输入搜索关键词"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),n("van-tabs",{attrs:{animated:"",swipeable:""}},[n("van-tab",{attrs:{title:"全部"}},[n("list",{attrs:{data:t.allData,keywords:t.keywords,type:"all"}})],1),n("van-tab",{attrs:{title:"免费"}},[n("list",{attrs:{data:t.allData,keywords:t.keywords,type:"free"}})],1),n("van-tab",{attrs:{title:"打折"}},[n("list",{attrs:{data:t.allData,keywords:t.keywords,type:"discount"}})],1)],1)],1)])},P=[],L=(n("4de4"),n("c975"),n("fb6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"scroller-box"}},[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad}},[t._l(t.showData,(function(t){return n("div",{key:t.node.id},[n("Card",{attrs:{nodeData:t.node}})],1)})),t.showData.length<1?n("van-empty",{attrs:{description:""}}):t._e()],2)],1)}),F=[],$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[n("van-card",{attrs:{price:t.getPrice(t.nodeData.current_offer.price.offset_amount),desc:t.relaceData,title:t.nodeData.display_name,thumb:t.getCoverUrl(t.nodeData.id),"origin-price":t.originPrice,"lazy-load":!1},on:{click:t.onCardClicked},scopedSlots:t._u([{key:"tags",fn:function(){return[t.isFree?n("van-tag",{attrs:{plain:"",type:"success"}},[t._v("免费")]):t._e(),t.isDiscount?n("van-tag",{attrs:{plain:"",type:"danger"}},[t._v("打折")]):t._e()]},proxy:!0},{key:"num",fn:function(){return[t.isDiscount?n("van-tag",{attrs:{type:"danger"}},[[n("div",{staticStyle:{"text-align":"center"}},[n("div",[t._v(t._s(t.nodeData.current_offer.promo_benefit))]),n("div",{staticStyle:{"font-size":"0.5rem"}},[t._v(" "+t._s(t.timeRemain(t.nodeData.current_offer.end_time))+" ")])])]],2):t._e()]},proxy:!0}])})],1)},A=[],N=(n("b680"),n("5a0c")),M=n.n(N),U={props:{nodeData:{type:Object}},inject:["rate"],computed:{cardClickLink:function(){return"/detail/".concat(this.nodeData.id)},isDiscount:function(){return!!this.nodeData.current_offer.promo_benefit},isFree:function(){return"0"==this.nodeData.current_offer.price.offset_amount},tag:function(){return this.isDiscount?"打折":this.isFree?"免费":null},relaceData:function(){return"发售日期：".concat(this.getDate(this.nodeData.release_date))},originPrice:function(){return this.isDiscount?this.getPrice(this.nodeData.current_offer.strikethrough_price.offset_amount):null}},methods:{getCoverUrl:function(t){return"./detail/".concat(t,"/cover/square.jpg")},getPrice:function(t){return"0"==t?null:(t*this.rate.USD/100).toFixed(2)},getDate:function(t){return M.a.unix(t).format("YYYY-MM-DD")},timeRemain:function(t){var e=n("4208");M.a.extend(e);var a=M.a.unix(t);return"剩余：".concat(a.fromNow(!0))},onCardClicked:function(){this.$router.push(this.cardClickLink)}}},q=U,B=(n("0ab0"),Object(O["a"])(q,$,A,!1,null,null,null)),Y=B.exports,z={props:{data:{type:Array,default:function(){return[]}},keywords:{type:String,default:""},type:{type:String,default:"all"}},components:{Card:Y},data:function(){return{allData:[],filterType:[],offsetIndex:0,pageItems:20,finished:!1,showBackTopIcon:!0}},computed:{isFree:function(){return"free"===this.type},isDiscount:function(){return"discount"===this.type},filtedData:function(){var t=this;return this.data.filter((function(e){if(t.isDiscount&&!e.node.current_offer.promo_benefit)return!1;if(t.isFree&&"$0.00"!==e.node.current_offer.price.formatted)return!1;var n=e.node.display_name.toLowerCase();return-1!=n.indexOf(t.keywords.toLowerCase())}))},showData:function(){return this.filtedData.slice(0,this.offsetIndex)},itemCount:function(){return"列表数量：".concat(this.showData.length)}},watch:{filtedData:function(){this.offsetIndex=this.pageItems,this.updateOffesetIndex()}},methods:{updateOffesetIndex:function(){this.offsetIndex>=this.filtedData.length?(this.offsetIndex=this.filtedData.length,this.offsetIndex>this.pageItems&&(this.finished=!0)):this.finished=!1},onLoad:function(){this.offsetIndex<this.filtedData.length&&(this.offsetIndex+=this.pageItems),this.updateOffesetIndex()},backTop:function(){}}},H=z,J=(n("f62b"),Object(O["a"])(H,L,F,!1,null,null,null)),R=J.exports,K=n("f8c8"),G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-fade-in"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!0,expression:"true"}],staticClass:"page-component-up",on:{click:t.scrollToTop}},[n("van-icon",{staticClass:"el-icon-caret-top",attrs:{name:"back-top"}})],1)])},Q=[],V={data:function(){return{toTopShow:!1}},methods:{scrollToTop:function(){document.documentElement.scrollTop=0,document.body.scrollTop=0,document.getElementById("scroller-box").children[0].scrollTop=0}}},W=V,X=(n("203f"),Object(O["a"])(W,G,Q,!1,null,"c27c9f24",null)),Z=X.exports,tt={name:"App",components:{List:R,ScrollTop:Z},data:function(){return{allData:[],filterType:[],keywords:"",isFree:!1,isDiscount:!1,offsetIndex:0,pageItems:20,finished:!1,rate:{USD:6.53}}},provide:function(){return{rate:this.rate}},computed:{filtedData:function(){var t=this;return this.allData.filter((function(e){if(t.isDiscount&&!e.node.current_offer.promo_benefit)return!1;if(t.isFree&&"$0.00"!==e.node.current_offer.price.formatted)return!1;var n=e.node.display_name.toLowerCase();return-1!=n.indexOf(t.keywords.toLowerCase())}))},showData:function(){return this.filtedData.slice(0,this.offsetIndex)},itemCount:function(){return"列表数量：".concat(this.showData.length)}},created:function(){var t=this;Object(K["c"])().then((function(e){console.log("get store data",e),t.allData=e.data.data.node.all_items.edges})),Object(K["b"])().then((function(e){t.rate.USD=e?e.data.data.rate:6.53}))}},et=tt,nt=Object(O["a"])(et,E,P,!1,null,null,null),at=nt.exports;x["a"].use(S["a"]);var rt=[{path:"/",name:"Home",component:at},{path:"/detail/:id",name:"Detail",component:function(){return n.e("about").then(n.bind(null,"c84b"))}}],ot=new S["a"]({routes:rt}),it=ot;x["a"].config.productionTip=!1,x["a"].use(w["a"]),x["a"].use(_["a"]),x["a"].use(D["a"]),x["a"].use(y["a"]),x["a"].use(g["a"]),x["a"].use(b["a"]),x["a"].use(v["a"]),x["a"].use(m["a"]),x["a"].use(h["a"]),x["a"].use(p["a"]),x["a"].use(d["a"]),x["a"].use(l["a"]),x["a"].use(f["a"]),x["a"].use(c["a"]),x["a"].use(u["a"]),x["a"].use(s["a"]),x["a"].use(i["a"]),x["a"].use(o["a"]),x["a"].use(r["a"]),x["a"].use(a["a"]),new x["a"]({router:it,render:function(t){return t(I)}}).$mount("#app")},"65da":function(t,e,n){},"85d7":function(t,e,n){},c432:function(t,e,n){},f62b:function(t,e,n){"use strict";n("65da")},f8c8:function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return s}));var a=n("bc3a"),r=n.n(a);function o(){return r.a.get("./oculus-quest-store.json?v=".concat(Date.now()))}function i(){return r.a.get("./usd-rate.json?v=".concat(Date.now()))}function s(t){return r.a.get("./detail/".concat(t,"/appinfo.json"))}}});