(function(t){function e(e){for(var a,o,s=e[0],u=e[1],c=e[2],d=0,l=[];d<s.length;d++)o=s[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&l.push(r[o][0]),r[o]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(t[a]=u[a]);f&&f(e);while(l.length)l.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,s=1;s<n.length;s++){var u=n[s];0!==r[u]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},r={app:0},i=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/oculus-quest-store-list/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var f=u;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0ab0":function(t,e,n){"use strict";n("c432")},"56d7":function(t,e,n){"use strict";n.r(e);n("91d5");var a=n("f0ca"),r=(n("c3a6"),n("ad06")),i=(n("5852"),n("d961")),o=(n("66cf"),n("343b")),s=(n("5f1a"),n("a3e2")),u=(n("9cb7"),n("66fd")),c=(n("66b9"),n("b650")),f=(n("2994"),n("2bdd")),d=(n("4056"),n("44bf")),l=(n("81e6"),n("9ffb")),p=(n("4d48"),n("d1e1")),h=(n("a909"),n("3acc")),v=(n("3c32"),n("417e")),y=(n("0653"),n("34e9")),m=(n("c194"),n("7744")),b=(n("bda7"),n("5e46")),_=(n("da3c"),n("0b33")),g=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h1",{staticStyle:{"text-align":"center"}},[t._v("Oculus Quest 游戏查询")]),n("square")],1)},w=[],x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[n("van-search",{attrs:{placeholder:"请输入搜索关键词"},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),n("van-tabs",{attrs:{animated:"",swipeable:""}},[n("van-tab",{attrs:{title:"全部"}},[n("list",{attrs:{data:t.allData,keywords:t.keywords,type:"all"}})],1),n("van-tab",{attrs:{title:"免费"}},[n("list",{attrs:{data:t.allData,keywords:t.keywords,type:"free"}})],1),n("van-tab",{attrs:{title:"打折"}},[n("list",{attrs:{data:t.allData,keywords:t.keywords,type:"discount"}})],1)],1)],1)])},k=[],O=(n("4de4"),n("c975"),n("fb6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad}},[t._l(t.showData,(function(t){return n("div",{key:t.node.id},[n("Card",{attrs:{nodeData:t.node}})],1)})),t.showData.length<1?n("van-empty",{attrs:{description:"什么都没有"}}):t._e()],2)],1)}),I=[],C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[n("van-card",{attrs:{"thumb-link":t.cardClickLink,price:t.getPrice(t.nodeData.current_offer.price.offset_amount),desc:t.relaceData,title:t.nodeData.display_name,thumb:t.getCoverUrl(t.nodeData.id),"origin-price":t.originPrice,"lazy-load":!1},on:{click:t.onCardClicked},scopedSlots:t._u([{key:"tags",fn:function(){return[t.isFree?n("van-tag",{attrs:{plain:"",type:"success"}},[t._v("免费")]):t._e(),t.isDiscount?n("van-tag",{attrs:{plain:"",type:"danger"}},[t._v("打折")]):t._e()]},proxy:!0},{key:"num",fn:function(){return[t.isDiscount?n("van-tag",{attrs:{type:"danger"}},[[n("div",{staticStyle:{"text-align":"center"}},[n("div",[t._v(t._s(t.nodeData.current_offer.promo_benefit))]),n("div",{staticStyle:{"font-size":"0.5rem"}},[t._v(" "+t._s(t.timeRemain(t.nodeData.current_offer.end_time))+" ")])])]],2):t._e()]},proxy:!0}])})],1)},j=[],P=(n("b680"),n("5a0c")),S=n.n(P),L={props:{nodeData:{type:Object}},computed:{cardClickLink:function(){return"https://www.oculus.com/experiences/quest/".concat(this.nodeData.id,"/")},isDiscount:function(){return!!this.nodeData.current_offer.promo_benefit},isFree:function(){return"0"==this.nodeData.current_offer.price.offset_amount},tag:function(){return this.isDiscount?"打折":this.isFree?"免费":null},relaceData:function(){return"发售日期：".concat(this.getDate(this.nodeData.release_date))},originPrice:function(){return this.isDiscount?this.getPrice(this.nodeData.current_offer.strikethrough_price.offset_amount):null}},methods:{getCoverUrl:function(t){return"./cover/".concat(t,"/square.jpg")},getPrice:function(t){var e=6.53;return"0"==t?null:(t*e/100).toFixed(2)},getDate:function(t){return S.a.unix(t).format("YYYY-MM-DD")},timeRemain:function(t){S.a.locale("zh-cn");var e=n("4208");S.a.extend(e);var a=S.a.unix(t);return a.fromNow(!0)},onCardClicked:function(){window.open(this.cardClickLink)}}},F=L,T=(n("0ab0"),n("2877")),$=Object(T["a"])(F,C,j,!1,null,null,null),q=$.exports,M={props:{data:{default:[]},keywords:{type:String,default:""},type:{type:String,default:"all"}},components:{Card:q},data:function(){return{allData:[],filterType:[],offsetIndex:0,pageItems:20,finished:!1,showBackTopIcon:!0}},computed:{isFree:function(){return"free"===this.type},isDiscount:function(){return"discount"===this.type},filtedData:function(){var t=this;return this.data.filter((function(e){if(t.isDiscount&&!e.node.current_offer.promo_benefit)return!1;if(t.isFree&&"$0.00"!==e.node.current_offer.price.formatted)return!1;var n=e.node.display_name.toLowerCase();return-1!=n.indexOf(t.keywords.toLowerCase())}))},showData:function(){return this.filtedData.slice(0,this.offsetIndex)},itemCount:function(){return"列表数量：".concat(this.showData.length)}},watch:{filtedData:function(){this.offsetIndex=this.pageItems,this.updateOffesetIndex()}},methods:{updateOffesetIndex:function(){this.offsetIndex>=this.filtedData.length?(this.offsetIndex=this.filtedData.length,this.offsetIndex>this.pageItems&&(this.finished=!0)):this.finished=!1},onLoad:function(){this.offsetIndex<this.filtedData.length&&(this.offsetIndex+=this.pageItems),this.updateOffesetIndex()},backTop:function(){}}},E=M,Y=(n("f62b"),Object(T["a"])(E,O,I,!1,null,null,null)),z=Y.exports,J=n("bc3a"),R=n.n(J);function U(){return R.a.get("./oculus-quest-store.json?v=".concat(Date.now()))}var A={name:"App",components:{List:z},data:function(){return{allData:[],filterType:[],keywords:"",isFree:!1,isDiscount:!1,offsetIndex:0,pageItems:20,finished:!1}},computed:{filtedData:function(){var t=this;return this.allData.filter((function(e){if(t.isDiscount&&!e.node.current_offer.promo_benefit)return!1;if(t.isFree&&"$0.00"!==e.node.current_offer.price.formatted)return!1;var n=e.node.display_name.toLowerCase();return-1!=n.indexOf(t.keywords.toLowerCase())}))},showData:function(){return this.filtedData.slice(0,this.offsetIndex)},itemCount:function(){return"列表数量：".concat(this.showData.length)}},created:function(){var t=this;U().then((function(e){console.log("get store data",e),t.allData=e.data.data.node.all_items.edges}))}},B=A,N=Object(T["a"])(B,x,k,!1,null,null,null),Q=N.exports,G={components:{Square:Q}},H=G,K=Object(T["a"])(H,D,w,!1,null,null,null),V=K.exports;g["a"].config.productionTip=!1,g["a"].use(_["a"]),g["a"].use(b["a"]),g["a"].use(m["a"]),g["a"].use(y["a"]),g["a"].use(v["a"]),g["a"].use(h["a"]),g["a"].use(p["a"]),g["a"].use(l["a"]),g["a"].use(d["a"]),g["a"].use(f["a"]),g["a"].use(c["a"]),g["a"].use(u["a"]),g["a"].use(s["a"]),g["a"].use(o["a"]),g["a"].use(i["a"]),g["a"].use(r["a"]),g["a"].use(a["a"]),new g["a"]({render:function(t){return t(V)}}).$mount("#app")},"65da":function(t,e,n){},c432:function(t,e,n){},f62b:function(t,e,n){"use strict";n("65da")}});