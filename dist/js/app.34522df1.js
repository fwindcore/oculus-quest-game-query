(function(e){function t(t){for(var a,i,s=t[0],u=t[1],c=t[2],l=0,d=[];l<s.length;l++)i=s[l],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&d.push(r[i][0]),r[i]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);f&&f(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,s=1;s<n.length;s++){var u=n[s];0!==r[u]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},r={app:0},o=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/oculus-quest-store-list/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var f=u;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0ab0":function(e,t,n){"use strict";n("c432")},"56d7":function(e,t,n){"use strict";n.r(t);n("5852");var a=n("d961"),r=(n("66cf"),n("343b")),o=(n("5f1a"),n("a3e2")),i=(n("9cb7"),n("66fd")),s=(n("66b9"),n("b650")),u=(n("2994"),n("2bdd")),c=(n("4056"),n("44bf")),f=(n("81e6"),n("9ffb")),l=(n("4d48"),n("d1e1")),d=(n("a909"),n("3acc")),p=(n("3c32"),n("417e")),h=(n("0653"),n("34e9")),v=(n("c194"),n("7744")),b=(n("bda7"),n("5e46")),m=(n("da3c"),n("0b33")),_=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("h1",{staticStyle:{"text-align":"center"}},[e._v("Oculus Quest 游戏查询")]),n("square")],1)},y=[],D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("van-search",{attrs:{placeholder:"请输入搜索关键词"},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}}),n("van-row",{attrs:{type:"flex",justify:"center",gutter:"20"}},[n("van-checkbox",{attrs:{name:"free"},model:{value:e.isFree,callback:function(t){e.isFree=t},expression:"isFree"}},[e._v("免费")]),n("van-checkbox",{attrs:{name:"discount"},model:{value:e.isDiscount,callback:function(t){e.isDiscount=t},expression:"isDiscount"}},[e._v("打折")])],1)],1),n("van-list",{on:{load:e.onLoad}},e._l(e.showData,(function(t){return n("div",{key:t.node.id,attrs:{finished:e.finished}},[n("Card",{attrs:{nodeData:t.node}})],1)})),0)],1)},x=[],w=(n("4de4"),n("c975"),n("fb6a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"card"},[n("van-card",{attrs:{"thumb-link":e.cardClickLink,price:e.getPrice(e.nodeData.current_offer.price.offset_amount),desc:e.relaceData,title:e.nodeData.display_name,thumb:e.getCoverUrl(e.nodeData.id),"origin-price":e.originPrice,"lazy-load":!1},on:{click:e.onCardClicked},scopedSlots:e._u([{key:"tags",fn:function(){return[e.isFree?n("van-tag",{attrs:{plain:"",type:"success"}},[e._v("免费")]):e._e(),e.isDiscount?n("van-tag",{attrs:{plain:"",type:"danger"}},[e._v("打折")]):e._e()]},proxy:!0},{key:"num",fn:function(){return[e.isDiscount?n("van-tag",{attrs:{type:"danger"}},[[n("div",{staticStyle:{"text-align":"center"}},[n("div",[e._v(e._s(e.nodeData.current_offer.promo_benefit))]),n("div",{staticStyle:{"font-size":"0.5rem"}},[e._v(" "+e._s(e.timeRemain(e.nodeData.current_offer.end_time))+" ")])])]],2):e._e()]},proxy:!0}])})],1)}),k=[],O=(n("b680"),n("5a0c")),j=n.n(O),C={props:{nodeData:{type:Object}},computed:{cardClickLink:function(){return"https://www.oculus.com/experiences/quest/".concat(this.nodeData.id,"/")},isDiscount:function(){return!!this.nodeData.current_offer.promo_benefit},isFree:function(){return"0"==this.nodeData.current_offer.price.offset_amount},tag:function(){return this.isDiscount?"打折":this.isFree?"免费":null},relaceData:function(){return"发售日期：".concat(this.getDate(this.nodeData.release_date))},originPrice:function(){return this.isDiscount?this.getPrice(this.nodeData.current_offer.strikethrough_price.offset_amount):null}},methods:{getCoverUrl:function(e){return"./cover/".concat(e,"/square.jpg")},getPrice:function(e){var t=6.53;return"0"==e?null:(e*t/100).toFixed(2)},getDate:function(e){return j.a.unix(e).format("YYYY-MM-DD")},timeRemain:function(e){j.a.locale("zh-cn");var t=n("4208");j.a.extend(t);var a=j.a.unix(e);return a.fromNow(!0)},onCardClicked:function(){window.open(this.cardClickLink)}}},I=C,P=(n("0ab0"),n("2877")),S=Object(P["a"])(I,w,k,!1,null,null,null),F=S.exports,L=n("bc3a"),q=n.n(L);function M(){return q.a.get("./oculus-quest-store.json?v=".concat(Date.now()))}var $={name:"App",components:{Card:F},data:function(){return{allData:[],filterType:[],keywords:"",isFree:!1,isDiscount:!0,offsetIndex:0,pageItems:20,finished:!1}},computed:{filtedData:function(){var e=this;return this.allData.filter((function(t){if(e.isDiscount&&!t.node.current_offer.promo_benefit)return!1;if(e.isFree&&"$0.00"!==t.node.current_offer.price.formatted)return!1;var n=t.node.display_name.toLowerCase();return-1!=n.indexOf(e.keywords.toLowerCase())}))},showData:function(){return this.filtedData.slice(0,this.offsetIndex)}},created:function(){var e=this;M().then((function(t){console.log("get store data",t),e.allData=t.data.data.node.all_items.edges,e.onLoad()}))},watch:{filtedData:function(){this.offsetIndex=this.pageItems,this.updateOffesetIndex()}},methods:{updateOffesetIndex:function(){this.offsetIndex>=this.filtedData.length?(this.offsetIndex=this.filtedData.length,this.finished=!0):this.finished=!1},onLoad:function(){this.offsetIndex<this.filtedData.length&&(this.offsetIndex+=this.pageItems),this.updateOffesetIndex()}}},T=$,Y=Object(P["a"])(T,D,x,!1,null,null,null),z=Y.exports,E={components:{Square:z}},J=E,R=Object(P["a"])(J,g,y,!1,null,null,null),U=R.exports;_["a"].config.productionTip=!1,_["a"].use(m["a"]),_["a"].use(b["a"]),_["a"].use(v["a"]),_["a"].use(h["a"]),_["a"].use(p["a"]),_["a"].use(d["a"]),_["a"].use(l["a"]),_["a"].use(f["a"]),_["a"].use(c["a"]),_["a"].use(u["a"]),_["a"].use(s["a"]),_["a"].use(i["a"]),_["a"].use(o["a"]),_["a"].use(r["a"]),_["a"].use(a["a"]),new _["a"]({render:function(e){return e(U)}}).$mount("#app")},c432:function(e,t,n){}});